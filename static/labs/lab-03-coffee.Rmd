---
title: "Lab 03: Coffee ratings"
subtitle: "due Mon, September 20 at 11:59p ET"
output: 
  tufte::tufte_html:
    css: "sta210-labs.css"
    tufte_variant: "envisioned"
    highlight: pygments
    fig_height: 4
    fig_width: 6
    toc: true
    toc_depth: 1
link-citations: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      warning=FALSE, 
                      message=FALSE)
```


# Introduction - UPDATE

In today’s lab, you’ll use simple linear regression to analyze the relationship between the admissions rate and total cost for colleges and universities in the United States.

## Learning goals - UPDATE

By the end of the lab you will…

- Be able to fit a simple linear regression model using R.
- Be able to interpret the slope and intercept for the model.
- Be able to use statistical inference to draw conclusions about the slope
- Continue developing a workflow for reproducible data analysis

# Meet your team!

[Click here](https://prodduke-my.sharepoint.com/:x:/g/personal/mt324_duke_edu/EcxaeUdU8mRIiJHzEee-UBgBDpLfk1uNAgsnoEe4L2EdjQ?e=X4ndeQ) to see the team assignments for STA 210. This will be your team for labs and the final project.

Before you get started on the lab assignment, your TA will walk you through 

- An icebreaker activity to get to know your teammates
- The workflow when using GitHub as a team. 

By the end of the lab session, you should come up with a new team name. You can't use the same team name as another team, so be creative! Your TA will come around to record your team name by the end of lab.

# Getting Started

A repository has already been created for you and your teammates. Everyone in your team has access to the same repo.

-   Go to [STA 210 course organization](https://www.github.com/sta210-fa21) on GitHub.

-   In addition to your private individual repositories, you should now see a repo named **lab-03**. Go to that repository.

-   Each person on the team should clone the repository and open a new project in RStudio. **Do not make any changes to the .Rmd file until the instructions tell you do to so.**

# Getting started  - UPDATE with TEAM WORK!

-   Go to the [sta210-fa21](https://www.github.com/sta210-fa21) organization on GitHub. Click on the repo with the prefix **lab-03**. It contains the starter documents you need to complete the lab.

- Clone the repo and start a new project in RStudio. See the [Lab 01 instructions](https://sta210-fa21.netlify.app/labs/lab-01-ikea.html) for details on cloning a repo, starting a new R project and configuring git. 


## Packages

The follow packages are used in the lab.

```{r eval = F}
library(tidyverse)
library(broom)
library(knitr)
library(ggfortify)
```

## The Data 

[ADD DESCRIPTION OF THE DATA]

```{r eval = F}
coffe <- read_csv("data/coffee-ratings.csv")
```

# Workflow: Using git and GitHub as a team

**Assign each person on your team a number 1 through 4. For teams with 3 students, Team Member 1 can take on the role of "Team Member 4".

The following exercises must be done in order. **Only one person should type in the .Rmd file and push updates at a time.** When it is not your turn to type, you should still share ideas and contribute to the team's discussion.


# Exercises


**Note: Include axis labels and an informative title for all plots. Use the `kable` function to neatly print tables and regression output. Write all interpretations in the context of the data.**


::: {.commit}
`r emo::ji("yarn")` `r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` **Team Member 1:** Change the author to your team name and include each team member's name in the `author` field of the YAML in the following format. `Team Name: Team member 1, Team member 2, Team member 3, Team member 4`. 

Type the team's response to Exercises 1 - 2. 
::: 

1. Visualize the relationship between aroma and the total cup points. What do you observe from the plot? Use the plot the describe the relationship between the two variables. 

2. Fit the linear model and neatly display the results using 3 digits.

    - Interpret the slope in the context of the data. 

::: {.commit}
`r emo::ji("yarn")` `r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` **Team member 1**: Knit, commit and push your changes to GitHub with an informative commit message. Make sure to commit and push all changed files so that your Git pane is empty afterwards.

**All other team members**: **Pull** to get the updated documents from GitHub. Click on the .Rmd file, and you should see the responses to exercises 1- 2.

**Team Member 2**: It's your turn! Type the team's response to exercises 3 - 4.
:::

3. Would the members of your group drink a coffee represented by the intercept? Why or why not? Discuss as a group and write the group's consensus. 


4. We will proceed assuming the model conditions hold, so let's focus on the model diagnostics. We'll start by examining if there are any points with high leverage in the data. 

    - What threshold will you use to determine if there are points with high leverage? 
    - Are there any points with high leverage in the data? Briefly explain, including any output, graphs, etc. you used to determine the response. 
    
::: {.commit}
`r emo::ji("yarn")` `r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` **Team member 2**: Knit, commit and push your changes to GitHub with an informative commit message. Make sure to commit and push all changed files so that your Git pane is empty afterwards.

**All other team members**: **Pull** to get the updated documents from GitHub. Click on the .Rmd file, and you should see the responses to exercises 3 - 4.

**Team Member 3**: It's your turn! Type the team's response to exercise 5.
:::

5. Next, let's examine if there are any points with standardized residuals with large magnitude.  Are there any points with high leverage in the data? Briefly explain, including any output, graphs, etc. you used to determine the response. 

::: {.commit}
`r emo::ji("yarn")` `r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` **Team member 3**: Knit, commit and push your changes to GitHub with an informative commit message. Make sure to commit and push all changed files so that your Git pane is empty afterwards.

**All other team members**: **Pull** to get the updated documents from GitHub. Click on the .Rmd file, and you should see the responses to exercise 5.

**Team Member 4**: It's your turn! Type the team's response to exercise 6.
:::

6. Lastly, let's analyze Cook's D to determine if there are influential points in the data. 

    - Based on Cook's D, are there any influential points in our data? Briefly explain, including any output, graphs, etc. you used to determine the response. 
    - If there are influential points, briefly explain why they are influential based on the results from the previous exercises. 
    - If there are influential points, would you recommend removing these points from the data and refitting the model? Briefly explain why or why not.  
    
::: {.commit}
`r emo::ji("yarn")` `r emo::ji("white_check_mark")` `r emo::ji("arrow_up")` **Team member 4**: Knit, commit and push your changes to GitHub with an informative commit message. Make sure to commit and push all changed files so that your Git pane is empty afterwards.

**All other team members**: **Pull** to get the updated documents from GitHub. Click on the .Rmd file, and you should see the team's completed lab1 
:::

## Wrapping up

Go back through your write up to make sure you followed the coding style guidelines we discussed in class (e.g. no long lines of code)

:::{.commit}
**Team Member 2:** Make any edits as needed. Then knit, commit, and push the updated documents to GitHub if you made any changes.

All other team members can click to pull the finalized document.
:::


# Submission

- **Select <u>one</u> team member to upload the team's PDF submission to Gradescope.** 
- Be sure to include every team member's name in the Gradescope submission 
- Associate the "Workflow & formatting" graded section with the first page of your PDF, and mark the page associated with each exercise. If any answer spans multiple pages, then mark all pages.

**There should only be <u>one</u> submission per team on Gradescope.**

# Grading (50 pts)

<br>

| Component | Points |
|:----------|:-------|
| Ex 1 - 10     | 42   |
| Workflow & formatting     | 5 |   
| Complete team contract     | 3  |  

**Grading notes**:

-   The "Workflow & formatting" grade is to assess the reproducible workflow and team work. This includes having at least one meaningful commit by each team member and updating the name and date in the YAML.
